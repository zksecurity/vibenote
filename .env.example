########################################
# Shared (Frontend + Backend) envs     #
########################################

# Public base URL of the VibeNote backend API.
# Non-secret. Used by:
#  - Frontend (to call the API)
#  - Backend deployment scripts (to configure NGINX and request TLS)
# Backend base URL.
# - For local dev / VPS scripts: set VIBENOTE_API_BASE in `.env`
# - For the frontend (local + Vercel production), set VITE_VIBENOTE_API_BASE so builds point at the deployed backend
VIBENOTE_API_BASE=https://api.vibenote.dev
VITE_VIBENOTE_API_BASE=https://api.vibenote.dev


########################################
# Backend API envs                     #
########################################

# These variables are consumed by the Express backend (server/src/index.ts)

# GitHub App slug (string). Non-secret. Used to build install URLs.
GITHUB_APP_SLUG=vibenote-app

# GitHub App numeric identifier. Non-secret. Visible on the GitHub App settings page.
GITHUB_APP_ID=123456

# GitHub App private key. SECRET. Server-only.
# Provide the PEM contents directly or base64-encode the PEM to keep it single-line.
GITHUB_APP_PRIVATE_KEY=TODO

# GitHub App OAuth Client ID. Non-secret identifier for user login.
GITHUB_OAUTH_CLIENT_ID=Iv23li0oHmO9IO1hmIz5

# GitHub App OAuth Client Secret. SECRET. Server-only.
# Used by the backend to exchange the OAuth code for a user token during login.
GITHUB_OAUTH_CLIENT_SECRET=TODO

# GitHub Webhook secret. SECRET. Server-only.
# Must match the value configured in the GitHub Appâ€™s Webhook settings.
# Generate a random value with: `npm run generate-secret`
GITHUB_WEBHOOK_SECRET=TODO

# Session JWT signing secret. SECRET. Server-only.
# Used to sign user session tokens returned to the frontend.
# Generate a random value with: `npm run generate-secret`
SESSION_JWT_SECRET=TODO

# Session store encryption key. SECRET. Server-only.
# Used to encrypt GitHub refresh tokens at rest inside sessions.json.
# Provide a 32-byte value (hex or base64). Example: `npm run generate-secret`
SESSION_ENCRYPTION_KEY=TODO

# Path to the JSON file that stores encrypted session refresh tokens.
# Defaults to ./server/data/sessions.json when unset. The API will create
# the directory if it does not exist. Ensure the path is writable in production.
SESSION_STORE_FILE=./server/data/sessions.json

# Path to the JSON file that stores share link metadata.
# Defaults to ./server/data/shares.json when unset.
SHARE_STORE_FILE=./server/data/shares.json

# CORS allow-list for the backend API. Non-secret.
# Comma-separated origins allowed to call the API from a browser.
# Example for local dev + production frontend:
ALLOWED_ORIGINS=http://localhost:3000,https://vibenote.dev

# Vercel preview deployment URL pattern (regex). Required for preview deployments.
# Regular expression to match Vercel preview deployment origins.
# Used for CORS validation and user allowlist enforcement.
# If not set, preview deployments are blocked entirely (fail-safe).
# Set a specific pattern for your project and team:
# Example: VERCEL_PREVIEW_URL_PATTERN=^https:\/\/vibenote-(git-[a-z0-9-]+|(?!git-)[a-z0-9]+)-gregor-mitschabaudes-projects\.vercel\.app$
# VERCEL_PREVIEW_URL_PATTERN=

# GitHub user allow-list for preview deployments. Optional.
# If set, only these GitHub usernames can authenticate from Vercel preview URLs.
# Backend detects preview requests by origin (using VERCEL_PREVIEW_URL_PATTERN) and enforces this allowlist.
# Production requests (from vibenote.dev) skip the allowlist check.
# Provides defense-in-depth security for preview deployments on the same backend instance.
# Example: ALLOWED_GITHUB_USERS=mitscherlich,other-dev
# ALLOWED_GITHUB_USERS=

# Port the Express server listens on (behind NGINX). Non-secret.
PORT=8787

# Base URL used when generating public share links.
# In production we serve the share viewer from the same domain.
PUBLIC_VIEWER_BASE_URL=https://vibenote.dev

########################################
# VPS (NGINX/PM2) only envs            #
########################################

# Email used by Certbot for TLS provisioning. Non-secret.
# Only needed when running the VPS deployment scripts.
CERTBOT_EMAIL=you@example.com
